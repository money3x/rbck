/* ========================================
   LUXURY SIDEBAR DROPDOWN SYSTEM
   Premium collapsible navigation with gold accents
======================================== */

/* ========================================
   DROPDOWN VARIABLES & FOUNDATION
======================================== */

:root {
  /* Dropdown specific variables */
  --dropdown-transition-duration: 0.35s;
  --dropdown-ease: cubic-bezier(0.4, 0, 0.2, 1);
  --dropdown-gold-glow: 0 4px 20px rgba(255, 215, 0, 0.3);
  --dropdown-shadow-closed: 0 2px 8px rgba(0, 0, 0, 0.1);
  --dropdown-shadow-open: 0 8px 32px rgba(255, 215, 0, 0.15);
  --dropdown-indicator-size: 16px;
}

/* ========================================
   DROPDOWN CATEGORY ENHANCEMENT
======================================== */

/* Enhanced category with dropdown capability */
.nav-category.dropdown-enabled {
  overflow: hidden;
  transition: all var(--dropdown-transition-duration) var(--dropdown-ease);
  cursor: pointer;
  position: relative;
}

/* Collapsed state (default) */
.nav-category.dropdown-enabled.collapsed .sub-menu-grid {
  max-height: 0;
  padding: 0 var(--luxury-space-sm);
  opacity: 0;
  transform: translateY(-10px);
  visibility: hidden;
  overflow: hidden;
  transition: all var(--dropdown-transition-duration) var(--dropdown-ease);
}

/* Expanded state */
.nav-category.dropdown-enabled.expanded .sub-menu-grid {
  max-height: 1000px; /* Generous height for animation */
  padding: var(--luxury-space-sm);
  opacity: 1;
  transform: translateY(0);
  visibility: visible;
  transition: all var(--dropdown-transition-duration) var(--dropdown-ease);
}

/* Hover enhancement for collapsible categories */
.nav-category.dropdown-enabled:hover {
  background: linear-gradient(135deg,
    rgba(255, 215, 0, 0.08) 0%,
    rgba(26, 26, 26, 0.85) 50%,
    rgba(10, 10, 10, 0.9) 100%) !important;
  border-color: rgba(255, 215, 0, 0.25) !important;
  box-shadow: var(--dropdown-shadow-open) !important;
}

/* ========================================
   DROPDOWN INDICATOR (CHEVRON)
======================================== */

/* Dropdown indicator container */
.category-header.dropdown-header {
  cursor: pointer;
  user-select: none;
  position: relative;
  transition: all var(--dropdown-transition-duration) var(--dropdown-ease);
}

/* Dropdown chevron icon */
.dropdown-indicator {
  position: absolute;
  right: var(--luxury-space-lg);
  top: 50%;
  transform: translateY(-50%);
  width: var(--dropdown-indicator-size);
  height: var(--dropdown-indicator-size);
  color: var(--luxury-text-accent);
  font-size: 0.75rem;
  transition: all var(--dropdown-transition-duration) var(--dropdown-ease);
  opacity: 0.7;
  pointer-events: none;
}

/* Chevron rotation for expanded state */
.nav-category.expanded .dropdown-indicator {
  transform: translateY(-50%) rotate(180deg);
  opacity: 1;
  color: var(--luxury-text-accent);
  filter: drop-shadow(0 2px 4px rgba(255, 215, 0, 0.3));
}

/* Chevron hover effect */
.category-header.dropdown-header:hover .dropdown-indicator {
  opacity: 1;
  transform: translateY(-50%) scale(1.1);
}

/* ========================================
   LUXURY ANIMATION EFFECTS
======================================== */

/* Staggered animation for dropdown items */
.nav-category.expanded .nav-link {
  animation: dropdownItemFadeIn 0.4s var(--dropdown-ease) forwards;
  opacity: 0;
  transform: translateX(-20px);
}

.nav-category.expanded .nav-link:nth-child(1) { animation-delay: 0.05s; }
.nav-category.expanded .nav-link:nth-child(2) { animation-delay: 0.1s; }
.nav-category.expanded .nav-link:nth-child(3) { animation-delay: 0.15s; }
.nav-category.expanded .nav-link:nth-child(4) { animation-delay: 0.2s; }
.nav-category.expanded .nav-link:nth-child(5) { animation-delay: 0.25s; }

@keyframes dropdownItemFadeIn {
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Pulse effect on category expand */
.nav-category.dropdown-enabled.expanding {
  animation: categoryPulse 0.6s ease-out;
}

@keyframes categoryPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* ========================================
   ENHANCED VISUAL STATES
======================================== */

/* Enhanced category header when dropdown is active */
.nav-category.expanded .category-header {
  background: linear-gradient(135deg,
    rgba(255, 215, 0, 0.2) 0%,
    rgba(255, 215, 0, 0.1) 50%,
    rgba(26, 26, 26, 0.8) 100%) !important;
  border-bottom: 1px solid rgba(255, 215, 0, 0.3) !important;
  box-shadow: inset 0 1px 0 rgba(255, 215, 0, 0.1);
}

/* Enhanced border glow for expanded categories */
.nav-category.expanded {
  border-color: var(--luxury-text-accent) !important;
  box-shadow: 
    var(--dropdown-gold-glow),
    inset 0 1px 0 rgba(255, 215, 0, 0.1) !important;
}

/* Category icon enhancement when expanded */
.nav-category.expanded .category-header i {
  color: var(--luxury-text-accent) !important;
  transform: scale(1.1);
  filter: drop-shadow(0 2px 4px rgba(255, 215, 0, 0.4));
}

/* ========================================
   ACCESSIBILITY ENHANCEMENTS
======================================== */

/* Focus states for keyboard navigation */
.category-header.dropdown-header:focus {
  outline: 2px solid var(--luxury-text-accent);
  outline-offset: 2px;
  background: rgba(255, 215, 0, 0.1) !important;
}

/* Screen reader improvements */
.dropdown-indicator::before {
  content: attr(aria-label);
  position: absolute;
  left: -9999px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .nav-category.expanded {
    border: 2px solid #FFFFFF !important;
  }
  
  .dropdown-indicator {
    color: #FFFFFF !important;
  }
  
  .nav-category.expanded .category-header {
    background: #FFFFFF !important;
    color: #000000 !important;
  }
}

/* ========================================
   RESPONSIVE BEHAVIOR
======================================== */

/* Mobile optimizations */
@media (max-width: 768px) {
  .dropdown-indicator {
    right: var(--luxury-space-md);
    width: 14px;
    height: 14px;
  }
  
  /* Faster animations on mobile */
  .nav-category.dropdown-enabled,
  .nav-category.dropdown-enabled .sub-menu-grid {
    transition-duration: 0.25s;
  }
  
  /* Larger touch targets */
  .category-header.dropdown-header {
    padding: var(--luxury-space-lg) var(--luxury-space-md);
    min-height: 48px;
  }
}

/* ========================================
   REDUCED MOTION SUPPORT
======================================== */

@media (prefers-reduced-motion: reduce) {
  .nav-category.dropdown-enabled,
  .nav-category.dropdown-enabled .sub-menu-grid,
  .dropdown-indicator,
  .nav-link {
    transition: none !important;
    animation: none !important;
  }
  
  /* Simple state changes without animation */
  .nav-category.collapsed .sub-menu-grid {
    display: none;
  }
  
  .nav-category.expanded .sub-menu-grid {
    display: block;
    opacity: 1;
    transform: none;
  }
}

/* ========================================
   SPECIAL EFFECTS FOR PREMIUM FEEL
======================================== */

/* Subtle background pattern for expanded categories */
.nav-category.expanded::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255, 215, 0, 0.02) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

/* Ensure content stays above background pattern */
.nav-category .category-header,
.nav-category .sub-menu-grid {
  position: relative;
  z-index: 1;
}

/* Shimmer effect on category hover (optional luxury touch) */
.nav-category.dropdown-enabled:hover::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg,
    transparent,
    rgba(255, 215, 0, 0.1),
    transparent);
  animation: shimmer 2s ease-in-out infinite;
  pointer-events: none;
}

@keyframes shimmer {
  0% { left: -100%; }
  100% { left: 100%; }
}

/* ========================================
   DROPDOWN STATES FOR DIFFERENT CATEGORIES
======================================== */

/* Default: All categories start collapsed */
.nav-category.dropdown-enabled {
  /* Default collapsed state applied via JavaScript */
}

/* Special styling for always-expanded categories (like Dashboard) */
.nav-category.always-expanded .sub-menu-grid {
  max-height: none !important;
  opacity: 1 !important;
  transform: none !important;
  visibility: visible !important;
  padding: var(--luxury-space-sm) !important;
}

.nav-category.always-expanded .dropdown-indicator {
  display: none;
}

/* ========================================
   PERFORMANCE OPTIMIZATIONS
======================================== */

/* Hardware acceleration for smooth animations */
.nav-category.dropdown-enabled,
.sub-menu-grid,
.dropdown-indicator {
  will-change: transform, opacity;
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
}

/* Containment for better performance */
.nav-category.dropdown-enabled {
  contain: layout style paint;
}

/* ========================================
   LUXURY SIDEBAR DROPDOWN COMPLETE
======================================== */